<!-- HTML header for doxygen 1.12.0-->
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
<head>
  <!-- Google Tag Manager -->
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-NN5JX4B');</script>
  <!-- End Google Tag Manager -->
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=11" />
  <meta name="generator" content="Doxygen 1.12.0" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SkyWay Unity SDK: README</title>
  <link href="tabs.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeParagraphLink.init()
  </script>
  <script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeInteractiveToc.init()
  </script>
  <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
  </script>
  <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
  <script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
  </script>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NN5JX4B" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <!-- https://tholman.com/github-corners/ -->
  <a href="https://github.com/skyway/unity-sdk-beta" class="github-corner" title="View source on GitHub" target="_blank"
    rel="noopener noreferrer">
    <svg viewBox="0 0 250 250" width="40" height="40"
      style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
      <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
      <path
        d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
        fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
      <path
        d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
        fill="currentColor" class="octo-body"></path>
    </svg></a>
    <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
      <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr id="projectrow">
              <td id="projectlogo"><img alt="Logo" src="logo-icon.svg"  /></td>
              <td id="projectalign">
                <div id="projectname">SkyWay Unity SDK
                </div>
                <div id="projectbrief">公式APIリファレンス</div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- end header part -->
<!-- 構築: Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','検索',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md__sky_way_unity_s_d_k_2_assets_2_sky_way_2_scripts_2_deps_2websocket-sharp_2_r_e_a_d_m_e.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">読み取り中…</div>
<div class="SRStatus" id="Searching">検索中…</div>
<div class="SRStatus" id="NoMatches">一致する文字列を見つけられません</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">README</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><img src="websocket-sharp_logo.png" alt="Logo" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md0"></a>
Welcome to websocket-sharp!</h2>
<p>websocket-sharp supports:</p>
<ul>
<li>RFC 6455</li>
<li>WebSocket Client and Server</li>
<li>Per-message Compression extension</li>
<li>Secure Connection</li>
<li>HTTP Authentication</li>
<li>Query string, Origin header, Cookies, and user headers</li>
<li>Connecting through the HTTP proxy server</li>
<li>.NET Framework <b>3.5</b> or later versions of .NET Framework (includes compatible environment such as <a href="http://www.mono-project.com">Mono</a>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md1"></a>
Branches</h2>
<ul>
<li><a href="https://github.com/sta/websocket-sharp/tree/master">master</a> for production releases.</li>
<li><a href="https://github.com/sta/websocket-sharp/tree/hybi-00">hybi-00</a> for older <a href="http://tools.ietf.org/html/draft-ietf-hybi-thewebsocketprotocol-00">draft-ietf-hybi-thewebsocketprotocol-00</a>. No longer maintained.</li>
<li><a href="https://github.com/sta/websocket-sharp/tree/draft75">draft75</a> for even more old <a href="http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol-75">draft-hixie-thewebsocketprotocol-75</a>. No longer maintained.</li>
</ul>
<h2><a class="anchor" id="autotoc_md2"></a>
Build</h2>
<p>websocket-sharp is built as a single assembly, <b>websocket-sharp.dll</b>.</p>
<p>websocket-sharp is developed with <a href="http://monodevelop.com">MonoDevelop</a>. So a simple way to build is to open <b>websocket-sharp.sln</b> and run build for <b>websocket-sharp project</b> with any of the build configurations (e.g. <code>Debug</code>) in MonoDevelop.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Install</h2>
<h3><a class="anchor" id="autotoc_md4"></a>
Self Build</h3>
<p>You should add your websocket-sharp.dll (e.g. <code>/path/to/websocket-sharp/bin/Debug/websocket-sharp.dll</code>) to the library references of your project.</p>
<p>If you would like to use that dll in your <a href="http://unity3d.com">Unity</a> project, you should add it to any folder of your project (e.g. <code>Assets/Plugins</code>) in the <b>Unity Editor</b>.</p>
<h3><a class="anchor" id="autotoc_md5"></a>
NuGet Gallery</h3>
<p>websocket-sharp is available on the <a href="http://www.nuget.org">NuGet Gallery</a>, as still a <b>prerelease</b> version.</p>
<ul>
<li><a href="http://www.nuget.org/packages/WebSocketSharp">NuGet Gallery: websocket-sharp</a></li>
</ul>
<p>You can add websocket-sharp to your project with the NuGet Package Manager, by using the following command in the Package Manager Console. </p><pre class="fragment">PM&gt; Install-Package WebSocketSharp -Pre
</pre><h2><a class="anchor" id="autotoc_md6"></a>
Usage</h2>
<h3><a class="anchor" id="autotoc_md7"></a>
WebSocket Client</h3>
<div class="fragment"><div class="line"><span class="keyword">using </span>System;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_web_socket_sharp.html">WebSocketSharp</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span>Example</div>
<div class="line">{</div>
<div class="line">  <span class="keyword">public</span> <span class="keyword">class </span>Program</div>
<div class="line">  {</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> Main (<span class="keywordtype">string</span>[] args)</div>
<div class="line">    {</div>
<div class="line">      <span class="keyword">using</span> (var ws = <span class="keyword">new</span> <a class="code hl_class" href="class_web_socket_sharp_1_1_web_socket.html">WebSocket</a> (<span class="stringliteral">&quot;ws://dragonsnest.far/Laputa&quot;</span>)) {</div>
<div class="line">        ws.OnMessage += (sender, e) =&gt;</div>
<div class="line">                          Console.WriteLine (<span class="stringliteral">&quot;Laputa says: &quot;</span> + e.Data);</div>
<div class="line"> </div>
<div class="line">        ws.Connect ();</div>
<div class="line">        ws.Send (<span class="stringliteral">&quot;BALUS&quot;</span>);</div>
<div class="line">        Console.ReadKey (<span class="keyword">true</span>);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_web_socket_sharp_1_1_web_socket_html"><div class="ttname"><a href="class_web_socket_sharp_1_1_web_socket.html">WebSocketSharp.WebSocket</a></div><div class="ttdoc">Implements the WebSocket interface.</div><div class="ttdef"><b>Definition</b> WebSocket.cs:72</div></div>
<div class="ttc" id="anamespace_web_socket_sharp_html"><div class="ttname"><a href="namespace_web_socket_sharp.html">WebSocketSharp</a></div><div class="ttdef"><b>Definition</b> ByteOrder.cs:32</div></div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md8"></a>
Step 1</h4>
<p>Required namespace.</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_web_socket_sharp.html">WebSocketSharp</a>;</div>
</div><!-- fragment --><p>The <code>WebSocket</code> class exists in the <code><a class="el" href="namespace_web_socket_sharp.html">WebSocketSharp</a></code> namespace.</p>
<h4><a class="anchor" id="autotoc_md9"></a>
Step 2</h4>
<p>Creating a new instance of the <code>WebSocket</code> class with the WebSocket URL to connect.</p>
<div class="fragment"><div class="line">var ws = <span class="keyword">new</span> <a class="code hl_class" href="class_web_socket_sharp_1_1_web_socket.html">WebSocket</a> (<span class="stringliteral">&quot;ws://example.com&quot;</span>);</div>
</div><!-- fragment --><p>The <code>WebSocket</code> class inherits the <code>System.IDisposable</code> interface, so you can create it with the <code>using</code> statement.</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> (var ws = <span class="keyword">new</span> <a class="code hl_class" href="class_web_socket_sharp_1_1_web_socket.html">WebSocket</a> (<span class="stringliteral">&quot;ws://example.com&quot;</span>)) {</div>
<div class="line">  ...</div>
<div class="line">}</div>
</div><!-- fragment --><p>This will <b>close</b> the WebSocket connection with status code <code>1001</code> (going away) when the control leaves the <code>using</code> block.</p>
<h4><a class="anchor" id="autotoc_md10"></a>
Step 3</h4>
<p>Setting the <code>WebSocket</code> events.</p>
<h5><a class="anchor" id="autotoc_md11"></a>
WebSocket.OnOpen Event</h5>
<p>This event occurs when the WebSocket connection has been established.</p>
<div class="fragment"><div class="line">ws.OnOpen += (sender, e) =&gt; {</div>
<div class="line">               ...</div>
<div class="line">             };</div>
</div><!-- fragment --><p><code>System.EventArgs.Empty</code> is passed as <code>e</code>, so you do not need to use it.</p>
<h5><a class="anchor" id="autotoc_md12"></a>
WebSocket.OnMessage Event</h5>
<p>This event occurs when the <code>WebSocket</code> instance receives a message.</p>
<div class="fragment"><div class="line">ws.OnMessage += (sender, e) =&gt; {</div>
<div class="line">                  ...</div>
<div class="line">                };</div>
</div><!-- fragment --><p>A <code><a class="el" href="class_web_socket_sharp_1_1_message_event_args.html" title="Represents the event data for the WebSocket.OnMessage event.">WebSocketSharp.MessageEventArgs</a></code> instance is passed as <code>e</code>.</p>
<p>If you would like to get the message data, you should access <code>e.Data</code> or <code>e.RawData</code> property.</p>
<p><code>e.Data</code> property returns a <code>string</code>, so it is mainly used to get the <b>text</b> message data.</p>
<p><code>e.RawData</code> property returns a <code>byte[]</code>, so it is mainly used to get the <b>binary</b> message data.</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (e.IsText) {</div>
<div class="line">  <span class="comment">// Do something with e.Data.</span></div>
<div class="line">  ...</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (e.IsBinary) {</div>
<div class="line">  <span class="comment">// Do something with e.RawData.</span></div>
<div class="line">  ...</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><p>And if you would like to notify that a <b>ping</b> has been received, via this event, you should set the <code>WebSocket.EmitOnPing</code> property to <code>true</code>.</p>
<div class="fragment"><div class="line">ws.EmitOnPing = <span class="keyword">true</span>;</div>
<div class="line">ws.OnMessage += (sender, e) =&gt; {</div>
<div class="line">                  <span class="keywordflow">if</span> (e.IsPing) {</div>
<div class="line">                    <span class="comment">// Do something to notify that a ping has been received.</span></div>
<div class="line">                    ...</div>
<div class="line"> </div>
<div class="line">                    <span class="keywordflow">return</span>;</div>
<div class="line">                  }</div>
<div class="line">                };</div>
</div><!-- fragment --><h5><a class="anchor" id="autotoc_md13"></a>
WebSocket.OnError Event</h5>
<p>This event occurs when the <code>WebSocket</code> instance gets an error.</p>
<div class="fragment"><div class="line">ws.OnError += (sender, e) =&gt; {</div>
<div class="line">                ...</div>
<div class="line">              };</div>
</div><!-- fragment --><p>A <code><a class="el" href="class_web_socket_sharp_1_1_error_event_args.html" title="Represents the event data for the WebSocket.OnError event.">WebSocketSharp.ErrorEventArgs</a></code> instance is passed as <code>e</code>.</p>
<p>If you would like to get the error message, you should access <code>e.Message</code> property.</p>
<p><code>e.Message</code> property returns a <code>string</code> that represents the error message.</p>
<p>And <code>e.Exception</code> property returns a <code>System.Exception</code> instance that represents the cause of the error if it is due to an exception.</p>
<h5><a class="anchor" id="autotoc_md14"></a>
WebSocket.OnClose Event</h5>
<p>This event occurs when the WebSocket connection has been closed.</p>
<div class="fragment"><div class="line">ws.OnClose += (sender, e) =&gt; {</div>
<div class="line">                ...</div>
<div class="line">              };</div>
</div><!-- fragment --><p>A <code><a class="el" href="class_web_socket_sharp_1_1_close_event_args.html" title="Represents the event data for the WebSocket.OnClose event.">WebSocketSharp.CloseEventArgs</a></code> instance is passed as <code>e</code>.</p>
<p>If you would like to get the reason for the close, you should access <code>e.Code</code> or <code>e.Reason</code> property.</p>
<p><code>e.Code</code> property returns a <code>ushort</code> that represents the status code for the close.</p>
<p><code>e.Reason</code> property returns a <code>string</code> that represents the reason for the close.</p>
<h4><a class="anchor" id="autotoc_md15"></a>
Step 4</h4>
<p>Connecting to the WebSocket server.</p>
<div class="fragment"><div class="line">ws.Connect ();</div>
</div><!-- fragment --><p>If you would like to connect to the server asynchronously, you should use the <code>WebSocket.ConnectAsync ()</code> method.</p>
<h4><a class="anchor" id="autotoc_md16"></a>
Step 5</h4>
<p>Sending data to the WebSocket server.</p>
<div class="fragment"><div class="line">ws.Send (data);</div>
</div><!-- fragment --><p>The <code>WebSocket.Send</code> method is overloaded.</p>
<p>You can use the <code>WebSocket.Send (string)</code>, <code>WebSocket.Send (byte[])</code>, <code>WebSocket.Send (System.IO.FileInfo)</code>, or <code>WebSocket.Send (System.IO.Stream, int)</code> method to send the data.</p>
<p>If you would like to send the data asynchronously, you should use the <code>WebSocket.SendAsync</code> method.</p>
<div class="fragment"><div class="line">ws.SendAsync (data, completed);</div>
</div><!-- fragment --><p>And also if you would like to do something when the send is complete, you should set <code>completed</code> to any <code>Action&lt;bool&gt;</code> delegate.</p>
<h4><a class="anchor" id="autotoc_md17"></a>
Step 6</h4>
<p>Closing the WebSocket connection.</p>
<div class="fragment"><div class="line">ws.Close (code, reason);</div>
</div><!-- fragment --><p>If you would like to close the connection explicitly, you should use the <code>WebSocket.Close</code> method.</p>
<p>The <code>WebSocket.Close</code> method is overloaded.</p>
<p>You can use the <code>WebSocket.Close ()</code>, <code>WebSocket.Close (ushort)</code>, <code>WebSocket.Close (<a class="el" href="namespace_web_socket_sharp.html#a30cb7538a7cd1d1d520cf1b1ecb5842c" title="Indicates the status code for the WebSocket connection close.">WebSocketSharp.CloseStatusCode</a>)</code>, <code>WebSocket.Close (ushort, string)</code>, or <code>WebSocket.Close (<a class="el" href="namespace_web_socket_sharp.html#a30cb7538a7cd1d1d520cf1b1ecb5842c" title="Indicates the status code for the WebSocket connection close.">WebSocketSharp.CloseStatusCode</a>, string)</code> method to close the connection.</p>
<p>If you would like to close the connection asynchronously, you should use the <code>WebSocket.CloseAsync</code> method.</p>
<h3><a class="anchor" id="autotoc_md18"></a>
WebSocket Server</h3>
<div class="fragment"><div class="line"><span class="keyword">using </span>System;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_web_socket_sharp.html">WebSocketSharp</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_web_socket_sharp_1_1_server.html">WebSocketSharp.Server</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span>Example</div>
<div class="line">{</div>
<div class="line">  <span class="keyword">public</span> <span class="keyword">class </span>Laputa : <a class="code hl_class" href="class_web_socket_sharp_1_1_server_1_1_web_socket_behavior.html">WebSocketBehavior</a></div>
<div class="line">  {</div>
<div class="line">    <span class="keyword">protected</span> <span class="keyword">override</span> <span class="keywordtype">void</span> OnMessage (<a class="code hl_class" href="class_web_socket_sharp_1_1_message_event_args.html">MessageEventArgs</a> e)</div>
<div class="line">    {</div>
<div class="line">      var msg = e.Data == <span class="stringliteral">&quot;BALUS&quot;</span></div>
<div class="line">                ? <span class="stringliteral">&quot;Are you kidding?&quot;</span></div>
<div class="line">                : <span class="stringliteral">&quot;I&#39;m not available now.&quot;</span>;</div>
<div class="line"> </div>
<div class="line">      Send (msg);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">public</span> <span class="keyword">class </span>Program</div>
<div class="line">  {</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> Main (<span class="keywordtype">string</span>[] args)</div>
<div class="line">    {</div>
<div class="line">      var wssv = <span class="keyword">new</span> <a class="code hl_class" href="class_web_socket_sharp_1_1_server_1_1_web_socket_server.html">WebSocketServer</a> (<span class="stringliteral">&quot;ws://dragonsnest.far&quot;</span>);</div>
<div class="line"> </div>
<div class="line">      wssv.AddWebSocketService&lt;Laputa&gt; (<span class="stringliteral">&quot;/Laputa&quot;</span>);</div>
<div class="line">      wssv.Start ();</div>
<div class="line">      Console.ReadKey (<span class="keyword">true</span>);</div>
<div class="line">      wssv.Stop ();</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_web_socket_sharp_1_1_message_event_args_html"><div class="ttname"><a href="class_web_socket_sharp_1_1_message_event_args.html">WebSocketSharp.MessageEventArgs</a></div><div class="ttdoc">Represents the event data for the WebSocket.OnMessage event.</div><div class="ttdef"><b>Definition</b> MessageEventArgs.cs:48</div></div>
<div class="ttc" id="aclass_web_socket_sharp_1_1_server_1_1_web_socket_behavior_html"><div class="ttname"><a href="class_web_socket_sharp_1_1_server_1_1_web_socket_behavior.html">WebSocketSharp.Server.WebSocketBehavior</a></div><div class="ttdoc">Exposes a set of methods and properties used to define the behavior of a WebSocket service provided b...</div><div class="ttdef"><b>Definition</b> WebSocketBehavior.cs:47</div></div>
<div class="ttc" id="aclass_web_socket_sharp_1_1_server_1_1_web_socket_server_html"><div class="ttname"><a href="class_web_socket_sharp_1_1_server_1_1_web_socket_server.html">WebSocketSharp.Server.WebSocketServer</a></div><div class="ttdoc">Provides a WebSocket protocol server.</div><div class="ttdef"><b>Definition</b> WebSocketServer.cs:58</div></div>
<div class="ttc" id="anamespace_web_socket_sharp_1_1_server_html"><div class="ttname"><a href="namespace_web_socket_sharp_1_1_server.html">WebSocketSharp.Server</a></div><div class="ttdef"><b>Definition</b> HttpRequestEventArgs.cs:36</div></div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md19"></a>
Step 1</h4>
<p>Required namespace.</p>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_web_socket_sharp_1_1_server.html">WebSocketSharp.Server</a>;</div>
</div><!-- fragment --><p>The <code>WebSocketBehavior</code> and <code>WebSocketServer</code> classes exist in the <code><a class="el" href="namespace_web_socket_sharp_1_1_server.html">WebSocketSharp.Server</a></code> namespace.</p>
<h4><a class="anchor" id="autotoc_md20"></a>
Step 2</h4>
<p>Creating the class that inherits the <code>WebSocketBehavior</code> class.</p>
<p>For example, if you would like to provide an echo service,</p>
<div class="fragment"><div class="line"><span class="keyword">using </span>System;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_web_socket_sharp.html">WebSocketSharp</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_web_socket_sharp_1_1_server.html">WebSocketSharp.Server</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>Echo : <a class="code hl_class" href="class_web_socket_sharp_1_1_server_1_1_web_socket_behavior.html">WebSocketBehavior</a></div>
<div class="line">{</div>
<div class="line">  <span class="keyword">protected</span> <span class="keyword">override</span> <span class="keywordtype">void</span> OnMessage (<a class="code hl_class" href="class_web_socket_sharp_1_1_message_event_args.html">MessageEventArgs</a> e)</div>
<div class="line">  {</div>
<div class="line">    Send (e.<a class="code hl_property" href="class_web_socket_sharp_1_1_message_event_args.html#a403d0654f59a504858b2cfb276ddeee4">Data</a>);</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_web_socket_sharp_1_1_message_event_args_html_a403d0654f59a504858b2cfb276ddeee4"><div class="ttname"><a href="class_web_socket_sharp_1_1_message_event_args.html#a403d0654f59a504858b2cfb276ddeee4">WebSocketSharp.MessageEventArgs.Data</a></div><div class="ttdeci">string Data</div><div class="ttdoc">Gets the message data as a string.</div><div class="ttdef"><b>Definition</b> MessageEventArgs.cs:109</div></div>
</div><!-- fragment --><p>And if you would like to provide a chat service,</p>
<div class="fragment"><div class="line"><span class="keyword">using </span>System;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_web_socket_sharp.html">WebSocketSharp</a>;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_web_socket_sharp_1_1_server.html">WebSocketSharp.Server</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>Chat : <a class="code hl_class" href="class_web_socket_sharp_1_1_server_1_1_web_socket_behavior.html">WebSocketBehavior</a></div>
<div class="line">{</div>
<div class="line">  <span class="keyword">private</span> <span class="keywordtype">string</span> _suffix;</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">public</span> Chat ()</div>
<div class="line">  {</div>
<div class="line">    _suffix = String.Empty;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">public</span> <span class="keywordtype">string</span> Suffix {</div>
<div class="line">    <span class="keyword">get</span> {</div>
<div class="line">      <span class="keywordflow">return</span> _suffix;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">set</span> {</div>
<div class="line">      _suffix = value ?? String.Empty;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">protected</span> <span class="keyword">override</span> <span class="keywordtype">void</span> OnMessage (<a class="code hl_class" href="class_web_socket_sharp_1_1_message_event_args.html">MessageEventArgs</a> e)</div>
<div class="line">  {</div>
<div class="line">    Sessions.Broadcast (e.Data + _suffix);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>You can define the behavior of any WebSocket service by creating the class that inherits the <code>WebSocketBehavior</code> class.</p>
<p>If you override the <code>WebSocketBehavior.OnMessage (MessageEventArgs)</code> method, it will be called when the <code>WebSocket</code> used in a session in the service receives a message.</p>
<p>And if you override the <code>WebSocketBehavior.OnOpen ()</code>, <code>WebSocketBehavior.OnError (ErrorEventArgs)</code>, and <code>WebSocketBehavior.OnClose (CloseEventArgs)</code> methods, each of them will be called when each of the <code>WebSocket</code> events (<code>OnOpen</code>, <code>OnError</code>, and <code>OnClose</code>) occurs.</p>
<p>The <code>WebSocketBehavior.Send</code> method can send data to the client on a session in the service.</p>
<p>If you would like to get the sessions in the service, you should access the <code>WebSocketBehavior.Sessions</code> property (returns a <code><a class="el" href="class_web_socket_sharp_1_1_server_1_1_web_socket_session_manager.html" title="Provides the management function for the sessions in a WebSocket service.">WebSocketSharp.Server.WebSocketSessionManager</a></code>).</p>
<p>The <code>WebSocketBehavior.Sessions.Broadcast</code> method can send data to every client in the service.</p>
<h4><a class="anchor" id="autotoc_md21"></a>
Step 3</h4>
<p>Creating a new instance of the <code>WebSocketServer</code> class.</p>
<div class="fragment"><div class="line">var wssv = <span class="keyword">new</span> <a class="code hl_class" href="class_web_socket_sharp_1_1_server_1_1_web_socket_server.html">WebSocketServer</a> (4649);</div>
<div class="line"> </div>
<div class="line">wssv.AddWebSocketService&lt;Echo&gt; (<span class="stringliteral">&quot;/Echo&quot;</span>);</div>
<div class="line">wssv.AddWebSocketService&lt;Chat&gt; (<span class="stringliteral">&quot;/Chat&quot;</span>);</div>
<div class="line">wssv.AddWebSocketService&lt;Chat&gt; (<span class="stringliteral">&quot;/ChatWithNyan&quot;</span>, s =&gt; s.Suffix = <span class="stringliteral">&quot; Nyan!&quot;</span>);</div>
</div><!-- fragment --><p>You can add any WebSocket service to your <code>WebSocketServer</code> with the specified behavior and absolute path to the service, by using the <code>WebSocketServer.AddWebSocketService&lt;TBehavior&gt; (string)</code> or <code>WebSocketServer.AddWebSocketService&lt;TBehavior&gt; (string, Action&lt;TBehavior&gt;)</code> method.</p>
<p>The type of <code>TBehavior</code> must inherit the <code>WebSocketBehavior</code> class, and must have a public parameterless constructor.</p>
<p>So you can use a class in the above Step 2 to add the service.</p>
<p>If you create a new instance of the <code>WebSocketServer</code> class without a port number, it sets the port number to <b>80</b>. So it is necessary to run with root permission. </p><pre class="fragment">$ sudo mono example2.exe
</pre><h4><a class="anchor" id="autotoc_md22"></a>
Step 4</h4>
<p>Starting the WebSocket server.</p>
<div class="fragment"><div class="line">wssv.Start ();</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md23"></a>
Step 5</h4>
<p>Stopping the WebSocket server.</p>
<div class="fragment"><div class="line">wssv.Stop ();</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md24"></a>
HTTP Server with the WebSocket</h3>
<p>I have modified the <code>System.Net.HttpListener</code>, <code>System.Net.HttpListenerContext</code>, and some other classes from <b>[Mono]</b> to create an HTTP server that allows to accept the WebSocket handshake requests.</p>
<p>So websocket-sharp provides the <code><a class="el" href="class_web_socket_sharp_1_1_server_1_1_http_server.html" title="Provides a simple HTTP server.">WebSocketSharp.Server.HttpServer</a></code> class.</p>
<p>You can add any WebSocket service to your <code>HttpServer</code> with the specified behavior and path to the service, by using the <code>HttpServer.AddWebSocketService&lt;TBehavior&gt; (string)</code> or <code>HttpServer.AddWebSocketService&lt;TBehavior&gt; (string, Action&lt;TBehavior&gt;)</code> method.</p>
<div class="fragment"><div class="line">var httpsv = <span class="keyword">new</span> <a class="code hl_class" href="class_web_socket_sharp_1_1_server_1_1_http_server.html">HttpServer</a> (4649);</div>
<div class="line"> </div>
<div class="line">httpsv.AddWebSocketService&lt;Echo&gt; (<span class="stringliteral">&quot;/Echo&quot;</span>);</div>
<div class="line">httpsv.AddWebSocketService&lt;Chat&gt; (<span class="stringliteral">&quot;/Chat&quot;</span>);</div>
<div class="line">httpsv.AddWebSocketService&lt;Chat&gt; (<span class="stringliteral">&quot;/ChatWithNyan&quot;</span>, s =&gt; s.Suffix = <span class="stringliteral">&quot; Nyan!&quot;</span>);</div>
<div class="ttc" id="aclass_web_socket_sharp_1_1_server_1_1_http_server_html"><div class="ttname"><a href="class_web_socket_sharp_1_1_server_1_1_http_server.html">WebSocketSharp.Server.HttpServer</a></div><div class="ttdoc">Provides a simple HTTP server.</div><div class="ttdef"><b>Definition</b> HttpServer.cs:67</div></div>
</div><!-- fragment --><p>For more information, would you see <b>[Example3]</b>?</p>
<h3><a class="anchor" id="autotoc_md25"></a>
WebSocket Extensions</h3>
<h4><a class="anchor" id="autotoc_md26"></a>
Per-message Compression</h4>
<p>websocket-sharp supports the <a href="https://datatracker.ietf.org/doc/html/rfc7692">Per-message Compression</a> extension (but does not support it with the <a href="https://datatracker.ietf.org/doc/html/rfc7692#section-7.1.1">context take over</a>).</p>
<p>As a WebSocket client, if you would like to enable this extension, you should set the <code>WebSocket.Compression</code> property to a compression method before calling the connect method.</p>
<div class="fragment"><div class="line">ws.Compression = <a class="code hl_enumeration" href="namespace_web_socket_sharp.html#ab331f7541737191a8f20131ee8fa37d0">CompressionMethod</a>.Deflate;</div>
<div class="ttc" id="anamespace_web_socket_sharp_html_ab331f7541737191a8f20131ee8fa37d0"><div class="ttname"><a href="namespace_web_socket_sharp.html#ab331f7541737191a8f20131ee8fa37d0">WebSocketSharp.CompressionMethod</a></div><div class="ttdeci">CompressionMethod</div><div class="ttdoc">Specifies the method for compression.</div><div class="ttdef"><b>Definition</b> CompressionMethod.cs:42</div></div>
</div><!-- fragment --><p>And then the client will send the following header in the handshake request to the server. </p><pre class="fragment">Sec-WebSocket-Extensions: permessage-deflate; server_no_context_takeover; client_no_context_takeover
</pre><p>If the server supports this extension, it will return the same header which has the corresponding value.</p>
<p>So eventually this extension will be available when the client receives the header in the handshake response.</p>
<h4><a class="anchor" id="autotoc_md27"></a>
Ignoring the extensions</h4>
<p>As a WebSocket server, if you would like to ignore the extensions requested from a client, you should set the <code>WebSocketBehavior.IgnoreExtensions</code> property to <code>true</code> in your <code>WebSocketBehavior</code> constructor or initializing it, such as the following.</p>
<div class="fragment"><div class="line">wssv.AddWebSocketService&lt;Chat&gt; (</div>
<div class="line">  <span class="stringliteral">&quot;/Chat&quot;</span>,</div>
<div class="line">  s =&gt; s.IgnoreExtensions = <span class="keyword">true</span> <span class="comment">// To ignore the extensions requested from a client.</span></div>
<div class="line">);</div>
</div><!-- fragment --><p>If it is set to <code>true</code>, the service will not return the Sec-WebSocket-Extensions header in its handshake response.</p>
<p>I think this is useful when you get something error in connecting the server and exclude the extensions as a cause of the error.</p>
<h3><a class="anchor" id="autotoc_md28"></a>
Secure Connection</h3>
<p>websocket-sharp supports the secure connection with <b>SSL/TLS</b>.</p>
<p>As a WebSocket client, you should create a new instance of the <code>WebSocket</code> class with a <b>wss</b> scheme WebSocket URL.</p>
<div class="fragment"><div class="line">var ws = <span class="keyword">new</span> <a class="code hl_class" href="class_web_socket_sharp_1_1_web_socket.html">WebSocket</a> (<span class="stringliteral">&quot;wss://example.com&quot;</span>);</div>
</div><!-- fragment --><p>If you would like to set a custom validation for the server certificate, you should set the <code>WebSocket.SslConfiguration.ServerCertificateValidationCallback</code> property to a callback for it.</p>
<div class="fragment"><div class="line">ws.SslConfiguration.ServerCertificateValidationCallback =</div>
<div class="line">  (sender, certificate, chain, sslPolicyErrors) =&gt; {</div>
<div class="line">    <span class="comment">// Do something to validate the server certificate.</span></div>
<div class="line">    ...</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// If the server certificate is valid.</span></div>
<div class="line">  };</div>
</div><!-- fragment --><p>The default callback always returns <code>true</code>.</p>
<p>As a WebSocket server, you should create a new instance of the <code>WebSocketServer</code> or <code>HttpServer</code> class with some settings for the secure connection, such as the following.</p>
<div class="fragment"><div class="line">var wssv = <span class="keyword">new</span> <a class="code hl_class" href="class_web_socket_sharp_1_1_server_1_1_web_socket_server.html">WebSocketServer</a> (5963, <span class="keyword">true</span>);</div>
<div class="line">wssv.SslConfiguration.ServerCertificate = <span class="keyword">new</span> X509Certificate2 (</div>
<div class="line">                                            <span class="stringliteral">&quot;/path/to/cert.pfx&quot;</span>, <span class="stringliteral">&quot;password for cert.pfx&quot;</span></div>
<div class="line">                                          );</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md29"></a>
HTTP Authentication</h3>
<p>websocket-sharp supports the <a href="http://tools.ietf.org/html/rfc2617">HTTP Authentication (Basic/Digest)</a>.</p>
<p>As a WebSocket client, you should set a pair of user name and password for the HTTP authentication, by using the <code>WebSocket.SetCredentials (string, string, bool)</code> method before calling the connect method.</p>
<div class="fragment"><div class="line">ws.SetCredentials (<span class="stringliteral">&quot;nobita&quot;</span>, <span class="stringliteral">&quot;password&quot;</span>, preAuth);</div>
</div><!-- fragment --><p>If <code>preAuth</code> is <code>true</code>, the client will send the credentials for the Basic authentication in the first handshake request to the server.</p>
<p>Otherwise, it will send the credentials for either the Basic or Digest (determined by the unauthorized response to the first handshake request) authentication in the second handshake request to the server.</p>
<p>As a WebSocket server, you should set an HTTP authentication scheme, a realm, and any function to find the user credentials before calling the start method, such as the following.</p>
<div class="fragment"><div class="line">wssv.AuthenticationSchemes = AuthenticationSchemes.Basic;</div>
<div class="line">wssv.Realm = <span class="stringliteral">&quot;WebSocket Test&quot;</span>;</div>
<div class="line">wssv.UserCredentialsFinder = <span class="keywordtype">id</span> =&gt; {</div>
<div class="line">    var name = <span class="keywordtype">id</span>.Name;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Return user name, password, and roles.</span></div>
<div class="line">    <span class="keywordflow">return</span> name == <span class="stringliteral">&quot;nobita&quot;</span></div>
<div class="line">           ? <span class="keyword">new</span> NetworkCredential (name, <span class="stringliteral">&quot;password&quot;</span>, <span class="stringliteral">&quot;gunfighter&quot;</span>)</div>
<div class="line">           : null; <span class="comment">// If the user credentials are not found.</span></div>
<div class="line">  };</div>
</div><!-- fragment --><p>If you would like to provide the Digest authentication, you should set such as the following.</p>
<div class="fragment"><div class="line">wssv.AuthenticationSchemes = AuthenticationSchemes.Digest;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md30"></a>
Query string, Origin header, Cookies, and user headers</h3>
<p>As a WebSocket client, if you would like to send the query string in the handshake request, you should create a new instance of the <code>WebSocket</code> class with a WebSocket URL that includes the <a href="http://tools.ietf.org/html/rfc3986#section-3.4">Query</a> string parameters.</p>
<div class="fragment"><div class="line">var ws = <span class="keyword">new</span> <a class="code hl_class" href="class_web_socket_sharp_1_1_web_socket.html">WebSocket</a> (<span class="stringliteral">&quot;ws://example.com/?name=nobita&quot;</span>);</div>
</div><!-- fragment --><p>And if you would like to send the Origin header in the handshake request, you should set the <code>WebSocket.Origin</code> property to an allowable value as the <a href="http://tools.ietf.org/html/rfc6454#section-7">Origin</a> header before calling the connect method.</p>
<div class="fragment"><div class="line">ws.Origin = <span class="stringliteral">&quot;http://example.com&quot;</span>;</div>
</div><!-- fragment --><p>And if you would like to send cookies in the handshake request, you should set any cookie by using the <code>WebSocket.SetCookie (<a class="el" href="class_web_socket_sharp_1_1_net_1_1_cookie.html" title="Provides a set of methods and properties used to manage an HTTP cookie.">WebSocketSharp.Net.Cookie</a>)</code> method before calling the connect method.</p>
<div class="fragment"><div class="line">ws.SetCookie (<span class="keyword">new</span> Cookie (<span class="stringliteral">&quot;name&quot;</span>, <span class="stringliteral">&quot;nobita&quot;</span>));</div>
</div><!-- fragment --><p>And also if you would like to send user headers in the handshake request, you should set any user defined header by using the <code>WebSocket.SetUserHeader (string, string)</code> method before calling the connect method.</p>
<div class="fragment"><div class="line">ws.SetUserHeader (<span class="stringliteral">&quot;HeaderFromClient&quot;</span>, <span class="stringliteral">&quot;HeaderFromServer&quot;</span>);</div>
</div><!-- fragment --><p>As a WebSocket server, if you would like to get the query string included in a handshake request, you should access the <code>WebSocketBehavior.QueryString</code> property, such as the following.</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span>Chat : <a class="code hl_class" href="class_web_socket_sharp_1_1_server_1_1_web_socket_behavior.html">WebSocketBehavior</a></div>
<div class="line">{</div>
<div class="line">  <span class="keyword">private</span> <span class="keywordtype">string</span> _name;</div>
<div class="line">  ...</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">protected</span> <span class="keyword">override</span> <span class="keywordtype">void</span> OnOpen ()</div>
<div class="line">  {</div>
<div class="line">    _name = QueryString[<span class="stringliteral">&quot;name&quot;</span>];</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  ...</div>
<div class="line">}</div>
</div><!-- fragment --><p>And if you would like to validate the Origin header, you should set a validation for it with your <code>WebSocketBehavior</code>, for example, by using the <code>WebSocketServer.AddWebSocketService&lt;TBehavior&gt; (string, Action&lt;TBehavior&gt;)</code> method with initializing, such as the following.</p>
<div class="fragment"><div class="line">wssv.AddWebSocketService&lt;Chat&gt; (</div>
<div class="line">  <span class="stringliteral">&quot;/Chat&quot;</span>,</div>
<div class="line">  s =&gt; {</div>
<div class="line">    s.OriginValidator =</div>
<div class="line">      val =&gt; {</div>
<div class="line">        <span class="comment">// Check the value of the Origin header, and return true if valid.</span></div>
<div class="line"> </div>
<div class="line">        Uri origin;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> !val.IsNullOrEmpty ()</div>
<div class="line">               &amp;&amp; Uri.TryCreate (val, UriKind.Absolute, out origin)</div>
<div class="line">               &amp;&amp; origin.Host == <span class="stringliteral">&quot;example.com&quot;</span>;</div>
<div class="line">      };</div>
<div class="line">  }</div>
<div class="line">);</div>
</div><!-- fragment --><p>And also if you would like to respond to the cookies, user headers, or both, you should set each response action for it with your <code>WebSocketBehavior</code>, for example, by using the <code>WebSocketServer.AddWebSocketService&lt;TBehavior&gt; (string, Action&lt;TBehavior&gt;)</code> method with initializing, such as the following.</p>
<div class="fragment"><div class="line">wssv.AddWebSocketService&lt;Chat&gt; (</div>
<div class="line">  <span class="stringliteral">&quot;/Chat&quot;</span>,</div>
<div class="line">  s =&gt; {</div>
<div class="line">    s.CookiesResponder =</div>
<div class="line">      (reqCookies, resCookies) =&gt; {</div>
<div class="line">        <span class="keywordflow">foreach</span> (var cookie <span class="keywordflow">in</span> reqCookies) {</div>
<div class="line">          cookie.Expired = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line">          resCookies.Add (cookie);</div>
<div class="line">        }</div>
<div class="line">      };</div>
<div class="line"> </div>
<div class="line">    s.UserHeadersResponder =</div>
<div class="line">      (reqHeaders, userHeaders) =&gt; {</div>
<div class="line">        var val = reqHeaders[<span class="stringliteral">&quot;HeaderFromClient&quot;</span>];</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!val.IsNullOrEmpty ())</div>
<div class="line">          userHeaders[val] = <span class="stringliteral">&quot;Hello From Server&quot;</span>;</div>
<div class="line">      };</div>
<div class="line">  }</div>
<div class="line">);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md31"></a>
Connecting through the HTTP proxy server</h3>
<p>websocket-sharp supports to connect through the HTTP proxy server.</p>
<p>If you would like to connect to a WebSocket server through the HTTP proxy server, you should set the proxy server URL, and if necessary, a pair of user name and password for the proxy server authentication (Basic/Digest), by using the <code>WebSocket.SetProxy (string, string, string)</code> method before calling the connect method.</p>
<div class="fragment"><div class="line">var ws = <span class="keyword">new</span> <a class="code hl_class" href="class_web_socket_sharp_1_1_web_socket.html">WebSocket</a> (<span class="stringliteral">&quot;ws://example.com&quot;</span>);</div>
<div class="line">ws.SetProxy (<span class="stringliteral">&quot;http://localhost:3128&quot;</span>, <span class="stringliteral">&quot;nobita&quot;</span>, <span class="stringliteral">&quot;password&quot;</span>);</div>
</div><!-- fragment --><p>I have tested this with <b>[Squid]</b>. It is necessary to disable the following option in <b>squid.conf</b> (e.g. <code>/etc/squid/squid.conf</code>).</p>
<div class="fragment"><div class="line"># Deny CONNECT to other than SSL ports</div>
<div class="line">#http_access deny CONNECT !SSL_ports</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md32"></a>
Logging</h3>
<p>The <code>WebSocket</code> class has the own logging function.</p>
<p>You can use it with the <code>WebSocket.Log</code> property (returns a <code><a class="el" href="class_web_socket_sharp_1_1_logger.html" title="Provides a set of methods and properties for logging.">WebSocketSharp.Logger</a></code>).</p>
<p>So if you would like to change the current logging level (<code><a class="el" href="namespace_web_socket_sharp.html#a7975f130c9b09a51ac5dd65eea7c84dba902b0d55fddef6f8d651fe1035b7d4bd" title="Specifies the 2nd logging level from the top.">WebSocketSharp.LogLevel.Error</a></code> as the default), you should set the <code>WebSocket.Log.Level</code> property to any of the <code>LogLevel</code> enum values.</p>
<div class="fragment"><div class="line">ws.Log.Level = <a class="code hl_enumeration" href="namespace_web_socket_sharp.html#a7975f130c9b09a51ac5dd65eea7c84db">LogLevel</a>.Debug;</div>
<div class="ttc" id="anamespace_web_socket_sharp_html_a7975f130c9b09a51ac5dd65eea7c84db"><div class="ttname"><a href="namespace_web_socket_sharp.html#a7975f130c9b09a51ac5dd65eea7c84db">WebSocketSharp.LogLevel</a></div><div class="ttdeci">LogLevel</div><div class="ttdoc">Specifies the logging level.</div><div class="ttdef"><b>Definition</b> LogLevel.cs:37</div></div>
</div><!-- fragment --><p>The above means a log with lower than <code>LogLevel.Debug</code> cannot be outputted.</p>
<p>And if you would like to output a log, you should use any of the output methods. The following outputs a log with <code>LogLevel.Debug</code>.</p>
<div class="fragment"><div class="line">ws.Log.Debug (<span class="stringliteral">&quot;This is a debug message.&quot;</span>);</div>
</div><!-- fragment --><p>The <code>WebSocketServer</code> and <code>HttpServer</code> classes have the same logging function.</p>
<h2><a class="anchor" id="autotoc_md33"></a>
Examples</h2>
<p>Examples using websocket-sharp.</p>
<h3><a class="anchor" id="autotoc_md34"></a>
Example</h3>
<p><a href="https://github.com/sta/websocket-sharp/tree/master/Example">Example</a> connects to the server executed by <a href="https://github.com/sta/websocket-sharp/tree/master/Example2">Example2</a> or <a href="https://github.com/sta/websocket-sharp/tree/master/Example3">Example3</a>.</p>
<h3><a class="anchor" id="autotoc_md35"></a>
Example2</h3>
<p><a href="https://github.com/sta/websocket-sharp/tree/master/Example2">Example2</a> starts a WebSocket server.</p>
<h3><a class="anchor" id="autotoc_md36"></a>
Example3</h3>
<p><a href="https://github.com/sta/websocket-sharp/tree/master/Example3">Example3</a> starts an HTTP server that allows to accept the WebSocket handshake requests.</p>
<p>Would you access to <a href="http://localhost:4649">http://localhost:4649</a> to do <b>WebSocket Echo Test</b> with your web browser while Example3 is running?</p>
<h2><a class="anchor" id="autotoc_md37"></a>
Supported WebSocket Specifications</h2>
<p>websocket-sharp supports <b>RFC 6455</b>, and it is based on the following references:</p>
<ul>
<li><a href="http://tools.ietf.org/html/rfc6455">The WebSocket Protocol</a></li>
<li><a href="http://www.w3.org/TR/websockets">The WebSocket API</a></li>
<li><a href="https://datatracker.ietf.org/doc/html/rfc7692">Compression Extensions for WebSocket</a></li>
</ul>
<p>Thanks for translating to japanese.</p>
<ul>
<li><a href="http://www.hcn.zaq.ne.jp/___/WEB/RFC6455-ja.html">The WebSocket Protocol 日本語訳</a></li>
<li><a href="http://www.hcn.zaq.ne.jp/___/WEB/WebSocket-ja.html">The WebSocket API 日本語訳</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md38"></a>
License</h2>
<p>websocket-sharp is provided under <a href="https://raw.github.com/sta/websocket-sharp/master/LICENSE.txt">The MIT License</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.12.0-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      ©NTT DOCOMO BUSINESS, Inc. All Rights Reserved.
      Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg"
          width="104" height="31" alt="doxygen" /></a></li>
  </ul>
</div>
</body>
</html>
